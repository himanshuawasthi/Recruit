@model List<Recruit.Models.Skills>



@{
    ViewBag.Title = "EditSkill";
}

<h2>Skills</h2>

<div class="panel panel-info">
    <div class="panel-heading">
        <div class="panel-title pull-left">
            <b>All Skills</b>
        </div>

        <div class="clearfix"></div>
    </div>
    <div class="panel-body">
        <div class="table-responsive">
            <table class="table table-bordered " id="Skills">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th> </th>
                        <th> </th>


                    </tr>
                </thead>
                <tbody>

                    @foreach (var skill in Model)
                    {
                        <tr>

                            <td>@skill.Name</td>
                            <td><button type ="submit" class="btn btn-primary js-delete" id="@skill.Id">Delete</button></td>
                            <td><button type="submit" class="btn btn-primary">Edit</button></td>
                        </tr>
                    }

                </tbody>
            </table>
        </div>
    </div>
</div>

<div id="txtArea" class="form-inline">
    @using (Html.BeginForm("Add", "Skill", FormMethod.Post))
    {
        <input type="text" class="form-control" />
        <button type="submit" class="btn btn-primary">Add Skill</button>
    }
</div>



<div id="butn">

</div>



@section scripts{
     <script>
         $(document).ready(function () {


             $("#Skills").DataTable();


             $("#Skills .js-delete").on('click', function (event) {
                 console.log("In handler");


                 var button=$(this);
                 bootbox.confirm("Are you sure you want to delete this skill?", (function (result) {
                     if (result) {
                         console.log("In if");
                         console.log(typeof(event.target.id));
                         $.ajax({
                             type: 'POST',
                             url: "@Url.Action("EditSkill", "Skill")",
                             data: JSON.stringify({ "key": event.target.id }),
                             contentType: "application/json; charset=utf-8",
                             dataType: "json",
                             success: function (data) {
                                 console.log("In success");
                                 button.parents("tr").remove();
                             },
                             error: function(data)
                             {
                                 console.log(data);
                             }
                         });
                     }
                 })

                 );
                
                 
             });
         });
     </script>
}

